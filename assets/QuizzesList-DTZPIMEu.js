import{r as e,f as s,u as a,j as i,F as t,L as n}from"./vendor-react-B9slfjkH.js";/* empty css              */import{n as r,y as c,z as l,l as o}from"./vendor-CQ7Um5D1.js";import{L as d}from"./main-C1RESi2Z.js";import{C as u}from"./ConfirmationModal-DeusARzF.js";import{P as h}from"./Pagination-D3S5DD5Z.js";import"./vendor-katex-7i1KP8HX.js";function z({mode:z}){const[f,j]=e.useState({}),[m,x]=e.useState(0),[p,q]=e.useState(!1),[v,g]=e.useState(!0),[y,N]=e.useState(1),[_,S]=e.useState(!1),[b,w]=e.useState(0),[A,C]=e.useState(!1),[Q,$]=e.useState(null),k=e.useRef(),D=e.useRef(),F=s(),P=a();function E(e){e.preventDefault(),""!==D.current.value&&P(`/dashboard/quizzes/search/${D.current.value}`)}return e.useEffect((()=>{g(!0);"list"==z?(async()=>{await o.get("/quizzes",{params:{page:F.page||1}}).then((e=>{j(e.data.quizzes.data),N(e.data.quizzes.last_page),x(e.data.quizzes.total),e.data.quizzes.total>10&&S(!0),g(!1)}))})():(async()=>{o.get("/quizzes/search",{params:{search:F.seach,page:F.page||1}}).then((e=>{if(0==e.data.quizzes.data.length)return q(!0),void g(!1);j(e.data.quizzes.data),N(e.data.quizzes.last_page),x(e.data.quizzes.total),e.data.quizzes.total>10&&S(!0),g(!1)})).catch((()=>{q(!0),g(!1)}))})()}),[F,b,z]),p?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"table",children:i.jsx("div",{className:"page-header",children:i.jsx("div",{className:"search",children:i.jsxs("form",{action:"",onSubmit:e=>E(e),children:[i.jsx("input",{ref:D,type:"text",placeholder:"Search for a quiz..."}),i.jsx(t,{icon:r,className:"icon"})]})})})}),i.jsxs("div",{className:"search-page empty",children:[i.jsx("h1",{children:"No quiz were found"}),i.jsx("p",{children:"please try checking the quiz title and try again"}),i.jsx(n,{to:"/dashboard/quizzes",children:"Quizzes list"})]})]}):v?i.jsx(d,{}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"table users-table",children:[i.jsxs("div",{className:"page-header",children:[i.jsx("div",{className:"search",children:i.jsxs("form",{action:"",onSubmit:e=>E(e),children:[i.jsx("input",{ref:D,type:"text",placeholder:"Search for a quiz..."}),i.jsx(t,{icon:r,className:"icon"})]})}),i.jsxs("select",{onChange:function(){1==k.current.value&&j([...f.sort(((e,s)=>e.quiz_title<s.quiz_title?-1:1))]),2==k.current.value&&j([...f.sort(((e,s)=>e.quiz_title>s.quiz_title?-1:1))]),3==k.current.value&&j([...f.sort(((e,s)=>e.quiz_difficulty<s.quiz_difficulty?-1:1))]),4==k.current.value&&j([...f.sort(((e,s)=>e.quiz_difficulty>s.quiz_difficulty?-1:1))])},ref:k,className:"sort",children:[i.jsx("option",{value:"1",children:"Sort from A to Z"}),i.jsx("option",{value:"2",children:"Sort from Z to A"}),i.jsx("option",{value:"3",children:"Sort by lowest price"}),i.jsx("option",{value:"4",children:"Sort by highest price"})]})]}),i.jsxs("h3",{className:"count",children:["Showing ",f.length," Quizzes from ",m]}),i.jsxs("table",{children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{className:"info-title",children:"Title"}),i.jsx("th",{className:"description",children:"Description"}),i.jsx("th",{className:"info-count",children:"Question count"}),i.jsx("th",{className:"difficulty",children:"difficulty"}),i.jsx("th",{className:"actions",children:"Actions"})]})}),i.jsx("tbody",{children:null==f?void 0:f.map((e=>{return i.jsxs("tr",{children:[i.jsx("td",{"data-info":"Title:",className:"info-title",children:i.jsx(n,{to:`/dashboard/quizzes/show/${e.quiz_id}`,children:e.quiz_title})}),i.jsx("td",{"data-info":"Description:",className:"description",children:e.quiz_description}),i.jsx("td",{"data-info":"Question count:",className:"info-count",children:e.quiz_questions_count}),i.jsx("td",{"data-info":"Quiz difficulty:",className:"difficulty",children:(s=e.quiz_difficulty,1==s?"Easy":2==s?"Medium":"Hard")}),i.jsx("td",{"data-info":"Actions:",className:"actions",children:i.jsxs("div",{className:"icons-wrapper",children:[i.jsx(n,{to:`/dashboard/quizzes/update/${e.quiz_id}`,children:i.jsx(t,{icon:c,className:"icon edit"})}),i.jsx(n,{onClick:()=>{return s=e.quiz_id,$(s),void C(!0);var s},children:i.jsx(t,{icon:l,className:"icon delete"})})]})})]},e.quiz_id);var s}))})]})]}),_&&i.jsx(h,{path:"list"==z?"/dashboard/quizzes":`/dashboard/quizzes/search/${F.search}`,page:F.page,lastPage:y}),i.jsx(u,{isOpen:A,onClose:function(){C(!1),$(null)},onConfirm:async function(){Q&&await o.delete(`/quizzes/${Q}`).then((()=>{w(b+1)})),C(!1),$(null)},message:"Are you sure you want to delete this quiz?"})]})}export{z as default};
