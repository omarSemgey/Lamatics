import{r as s,u as e,f as i,j as a,L as t,F as r}from"./vendor-react-CtwO7XYP.js";import{l as n,k as c}from"./vendor-Bb-fZBls.js";import{L as l}from"./index-C89luORy.js";import{P as o}from"./Pagination-D1uvtQUl.js";import"./vendor-katex-7i1KP8HX.js";function u({mode:u}){const[d,h]=s.useState([]),[m,j]=s.useState(1),[p,x]=s.useState(!1),[f,q]=s.useState(!0),[z,v]=s.useState(!1),[g,N]=s.useState(!1),y=e(),_=s.useRef(),b=s.useRef(),S=i();if(s.useEffect((()=>{"list"==u?(async()=>{await c.get("/submissions",{params:{page:S.page||1}}).then((s=>{if(0==s.data.submissions.data.length)return v(!0),void q(!1);h(s.data.submissions.data),j(s.data.submissions.last_page),s.data.submissions.total>10&&x(!0),q(!1)})).catch((()=>{v(!0)}))})():(async()=>{await c.get("/submissions/search",{params:{search:S.search,page:S.page||1}}).then((s=>{if(0==s.data.submissions.data.length)return N(!0),void q(!1);h(s.data.submissions.data),q(!1)})).catch((()=>{N(!0)}))})()}),[u,S]),f)return a.jsx(l,{});if(z)return a.jsx(a.Fragment,{children:a.jsxs("div",{className:"quiz-history empty",children:[a.jsx("h1",{children:"لم يتم اتمام اي امتحان من قبل"}),a.jsx("p",{children:"ابدا باخذ الامتحانات"}),a.jsx(t,{to:"/quizzes",children:"الصفحة الرئيسية"})]})});if(g)return a.jsx(a.Fragment,{children:a.jsxs("div",{className:"search-page empty",children:[a.jsx("h1",{children:"لم يتم العثور على اي نتائج"}),a.jsx("p",{children:"حاول التاكد من اسم الاختبار والمحاولة مرة اخرى"}),a.jsx(t,{to:"/profile/history",children:"ارجع الى الصفحة الرئيسية"})]})});function w(s){return 1==s?"سهل":2==s?"متوسط":"صعب"}return a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"quiz-history",children:[a.jsx("h2",{className:"header",children:"سجل الامتحانات"}),a.jsxs("div",{className:"page-header",children:[a.jsx("div",{className:"search",children:a.jsxs("form",{action:"",onSubmit:s=>function(s){s.preventDefault(),""!==b.current.value&&y(`/profile/history/search/${b.current.value}`)}(s),children:[a.jsx("input",{ref:b,type:"text",placeholder:"أبحث عن امتحان..."}),a.jsx(r,{icon:n,className:"icon"})]})}),a.jsxs("select",{onChange:function(){h((s=>{const e=[...s],i=_.current.value;return"1"===i?e.sort(((s,e)=>s.quiz.quiz_title.localeCompare(e.quiz.quiz_title))):"2"===i?e.sort(((s,e)=>e.quiz.quiz_title.localeCompare(s.quiz.quiz_title))):"3"===i?e.sort(((s,e)=>s.score-e.score)):"4"===i&&e.sort(((s,e)=>e.score-s.score)),e}))},ref:_,className:"sort",children:[a.jsx("option",{value:"1",children:"ترتيب تصاعدي حسب الابجدية"}),a.jsx("option",{value:"2",children:"ترتيب تنازلي حسب الابجدية"}),a.jsx("option",{value:"3",children:"ترتيب تصاعدي حسب النتيجة"}),a.jsx("option",{value:"4",children:"ترتيب تنازلي حسب النتيجة"})]})]}),null==d?void 0:d.map((s=>{return a.jsx(t,{to:`/quizzes/results/${s.quiz.quiz_id}`,children:a.jsxs("div",{className:"quiz-card",children:[a.jsx("p",{className:"quiz-title",children:s.quiz.quiz_title}),a.jsx("p",{className:"quiz-description",children:s.quiz.quiz_description}),a.jsxs("div",{className:"quiz-details",children:[a.jsxs("div",{className:"detail-item",children:[a.jsx("strong",{children:"الصعوبة : "}),a.jsx("span",{className:`difficulty ${(i=s.quiz.quiz_difficulty,1==i?"Easy":2==i?"Medium":"Hard").toLowerCase()}`,children:w(s.quiz.quiz_difficulty)})]}),a.jsxs("div",{className:"detail-item",children:[a.jsx("strong",{children:"عدد الاسئلة : "}),a.jsx("span",{className:"questions-count",children:s.quiz.quiz_questions_count})]}),a.jsxs("div",{className:"detail-item",children:[a.jsx("strong",{children:"النتيجة : "}),a.jsxs("span",{className:"score "+(e=s.score,e>75?"good":e>=50&&e<75?"medium":"bad"),children:["%",s.score]})]})]})]})},s.quiz.quiz_id);var e,i}))]}),p&&a.jsx(o,{path:"list"==u?"/profile/history":`/profile/history/search/${S.search}`,page:S.page,lastPage:m})]})}export{u as default};
