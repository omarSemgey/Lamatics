import{r as s,f as e,u as a,j as t,F as r,L as n}from"./vendor-react-B9slfjkH.js";/* empty css              */import{n as i,y as o,z as c,l}from"./vendor-CQ7Um5D1.js";import{L as d}from"./main-C1RESi2Z.js";import{C as u}from"./ConfirmationModal-DeusARzF.js";import{P as h}from"./Pagination-D3S5DD5Z.js";import"./vendor-katex-7i1KP8HX.js";function m({mode:m}){const[j,x]=s.useState({}),[p,f]=s.useState(0),[b,g]=s.useState(!1),[v,N]=s.useState(!0),[S,_]=s.useState(1),[y,w]=s.useState(!1),[A,C]=s.useState(0),[z,$]=s.useState(!1),[U,k]=s.useState(null),E=s.useRef(),F=s.useRef(),P=e(),L=a();function Q(s){s.preventDefault(),""!==F.current.value&&L(`/dashboard/users/search/${F.current.value}`)}return s.useEffect((()=>{N(!0);"list"==m?(async()=>{await l.get("/users",{params:{page:P.page||1}}).then((s=>{x(s.data.users.data),_(s.data.users.last_page),f(s.data.users.total),s.data.users.total>10&&w(!0),N(!1)}))})():(async()=>{await l.get("/users/search",{params:{search:P.search,page:P.page||1}}).then((s=>{if(0==s.data.users.data.length)return g(!0),void N(!1);x(s.data.users.data),_(s.data.users.last_page),f(s.data.users.total),s.data.users.total>10&&w(!0),N(!1)})).catch((()=>{g(!0),N(!1)}))})()}),[P,A,m]),b?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"table",children:t.jsx("div",{className:"page-header",children:t.jsx("div",{className:"search",children:t.jsxs("form",{action:"",onSubmit:s=>Q(s),children:[t.jsx("input",{ref:F,type:"text",placeholder:"Search for a user..."}),t.jsx(r,{icon:i,className:"icon"})]})})})}),t.jsxs("div",{className:"search-page empty",children:[t.jsx("h1",{children:"No users were found"}),t.jsx("p",{children:"please try checking the name and try again"}),t.jsx(n,{to:"/dashboard/users",children:"Users list"})]})]}):v?t.jsx(d,{}):t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"table users-table",children:[t.jsxs("div",{className:"page-header",children:[t.jsx("div",{className:"search",children:t.jsxs("form",{action:"",onSubmit:s=>Q(s),children:[t.jsx("input",{ref:F,type:"text",placeholder:"Search for a user..."}),t.jsx(r,{icon:i,className:"icon"})]})}),t.jsxs("select",{onChange:function(){1==E.current.value&&x([...j.sort(((s,e)=>s.name<e.name?-1:1))]),2==E.current.value&&x([...j.sort(((s,e)=>s.name>e.name?-1:1))]),3==E.current.value&&x([...j.sort(((s,e)=>s.user_submissions_count<e.user_submissions_count?-1:1))]),4==E.current.value&&x([...j.sort(((s,e)=>s.user_submissions_count>e.user_submissions_count?-1:1))])},ref:E,className:"sort",children:[t.jsx("option",{value:"1",children:"Sort from A to Z"}),t.jsx("option",{value:"2",children:"Sort from Z to A"}),t.jsx("option",{value:"3",children:"Sort by lowest submission"}),t.jsx("option",{value:"4",children:"Sort by highest submission"})]})]}),t.jsxs("h3",{className:"count",children:["Showing ",j.length," Users from ",p]}),t.jsxs("table",{children:[t.jsx("thead",{children:t.jsxs("tr",{children:[t.jsx("th",{className:"info-title",children:"Username"}),t.jsx("th",{className:"email",children:"Email"}),t.jsx("th",{className:"info-count",children:"Quizzes submission"}),t.jsx("th",{className:"actions",children:"Actions"})]})}),t.jsx("tbody",{children:j.map((s=>t.jsxs("tr",{children:[t.jsx("td",{"data-info":"Username:",className:"info-title",children:t.jsx(n,{to:`/dashboard/users/show/${s.user_id}`,children:s.name})}),t.jsx("td",{"data-info":"Email:",className:"email",children:s.email}),t.jsx("td",{"data-info":"Quizzes submission:",className:"info-count",children:s.user_submissions_count}),t.jsx("td",{"data-info":"Actions:",className:"actions",children:t.jsxs("div",{className:"icons-wrapper",children:[t.jsx(n,{to:`/dashboard/users/update/${s.user_id}`,children:t.jsx(r,{icon:o,className:"icon edit"})}),t.jsx(n,{onClick:()=>{return e=s.user_id,k(e),void $(!0);var e},children:t.jsx(r,{icon:c,className:"icon delete"})})]})})]},s.user_id)))})]})]}),y&&t.jsx(h,{path:"list"==m?"/dashboard/users":`/dashboard/users/search/${P.search}`,page:P.page,lastPage:S}),t.jsx(u,{isOpen:z,onClose:function(){$(!1),k(null)},onConfirm:async function(){U&&await l.delete(`/users/${U}`).then((()=>{C(A+1)})),$(!1),k(null)},message:"Are you sure you want to delete this user?"})]})}export{m as default};
