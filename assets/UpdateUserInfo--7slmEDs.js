import{u as e,e as a,r as s,j as r}from"./vendor-react-B9slfjkH.js";import{L as t}from"./main-C1RESi2Z.js";import{l as n}from"./vendor-CQ7Um5D1.js";import"./vendor-katex-7i1KP8HX.js";function i(){const i=e(),l=a(),d=s.useRef(),u=s.useRef(),c=s.useRef(),[o,m]=s.useState({}),[p,h]=s.useState(null),[f,x]=s.useState(!0),[j,v]=s.useState(!1);const y={name:{required:"حقل الاسم مطلوب",min:"الحد الأدنى للاسم ٣ أحرف",max:"الحد الأقصى للاسم ٢٥ حرفاً",format:"يجب أن يحتوي الاسم على حرف واحد على الأقل غير المسافة",unique:"الاسم مستخدم من قبل",type:"يجب أن يكون الاسم نصياً"},email:{required:"حقل البريد الإلكتروني مطلوب",email:"صيغة البريد الإلكتروني غير صحيحة",max:"الحد الأقصى للبريد الإلكتروني ٣٢٠ حرفاً",format:"يجب أن يحتوي البريد الإلكتروني على حرف واحد على الأقل غير المسافة",unique:"البريد الإلكتروني مستخدم من قبل",type:"يجب أن يكون البريد الإلكتروني نصياً"},password:{required:"حقل كلمة المرور مطلوب",min:"الحد الأدنى لكلمة المرور ٦ أحرف",format:"يجب أن تحتوي كلمة المرور على حرف واحد على الأقل غير المسافة",type:"يجب أن تكون كلمة المرور نصية"}};return s.useEffect((()=>{(async()=>{await n.get(`/users/${l}`).then((e=>{h(e.data.user),x(!1)}))})()}),[l]),f?r.jsx(t,{}):r.jsx("div",{className:"update-profile",children:r.jsxs("div",{className:"container",children:[r.jsx("div",{className:"header",children:r.jsx("h1",{children:"تعديل معلومات الحساب الشخصي"})}),r.jsxs("form",{children:[r.jsxs("div",{children:[r.jsx("label",{children:"اسم المستخدم"}),r.jsx("input",{ref:d,type:"text",dir:"rtl",placeholder:"اسم المستخدم",pattern:"^[\\p{L}0-9_\\s]{3,25}$",defaultValue:p.name,minLength:3,maxLength:25}),o.name&&r.jsx("p",{className:"error",children:o.name})]}),r.jsxs("div",{children:[r.jsx("label",{children:"عنوان البريد الالكتروني"}),r.jsx("input",{ref:u,type:"email",placeholder:"عنوان البريد الالكتروني",pattern:"^[^\\s@]+@[^\\s@]+\\.[^\\s@]{2,6}$",defaultValue:p.email,maxLength:320}),o.email&&r.jsx("p",{className:"error",children:o.email})]}),r.jsxs("div",{children:[r.jsx("label",{children:"كلمة المرور"}),r.jsx("input",{ref:c,type:"password",placeholder:"كلمة المرور",pattern:"^(?=.*[A-Za-z])(?=.*\\d).{6,}$",minLength:6}),o.password&&r.jsx("p",{className:"error",children:o.password})]}),r.jsx("button",{type:"submit",disabled:j,onClick:function(e){e.preventDefault(),v(!0),m({});const a=d.current.value,s=u.current.value,r=c.current.value,t={};a&&(t.name=a),s&&(t.email=s),r&&(t.password=r),n.put(`/users/${l}`,t).then((()=>{i("/profile")})).catch((e=>{var a,s;if(null==(s=null==(a=e.response)?void 0:a.data)?void 0:s.errors){const a={};Object.entries(e.response.data.errors).forEach((([e,s])=>{var r;const t=(n=s[0]).includes("already been taken")?"unique":n.includes("valid email address")?"email":n.includes("must not be empty")?"required":n.includes("at least")?"min":n.includes("greater than")?"max":n.includes("must be a string")?"type":n.includes("format is invalid")?"format":"other";var n;a[e]=(null==(r=y[e])?void 0:r[t])||s[0]})),m(a)}})).finally((()=>{v(!1)}))},children:"تعديل الحساب"})]})]})})}export{i as default};
