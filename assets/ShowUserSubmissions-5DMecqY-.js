import{r as s,u as e,f as i,j as a,F as t,L as r}from"./vendor-react-CtwO7XYP.js";import{l as n,k as o}from"./vendor-Bb-fZBls.js";import{L as c}from"./index-C89luORy.js";import{P as u}from"./Pagination-D1uvtQUl.js";import"./vendor-katex-7i1KP8HX.js";function l({mode:l}){const[d,h]=s.useState([]),[m,j]=s.useState(1),[x,f]=s.useState(!1),[p,b]=s.useState(!0),[z,q]=s.useState(!1),[g,N]=s.useState(!1),v=e(),y=s.useRef(),S=s.useRef(),_=i();if(s.useEffect((()=>{q(!1),N(!1);"list"==l?(async()=>{await o.get("/submissions",{params:{user_id:_.user,page:_.page||1}}).then((s=>{if(0==s.data.submissions.data.length)return q(!0),void b(!1);h(s.data.submissions.data),j(s.data.submissions.last_page),s.data.submissions.total>10&&f(!0),b(!1)})).catch((()=>{q(!0),b(!1)}))})():(async()=>{await o.get("/submissions/search/",{params:{search:_.search,user_id:_.user,page:_.page||1}}).then((s=>{if(0==s.data.submissions.data.length)return N(!0),void b(!1);h(s.data.submissions.data),j(s.data.submissions.last_page),s.data.submissions.total>10&&f(!0),b(!1)})).catch((()=>{N(!0),b(!1)}))})()}),[l,_]),p)return a.jsx(c,{});if(z)return a.jsx(a.Fragment,{children:a.jsxs("div",{className:"quiz-history empty",children:[a.jsx("h1",{children:"No quizzes were taken"}),a.jsx("p",{children:"This user didnt submit to any quiz."})]})});if(g)return a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"table",children:a.jsx("div",{className:"page-header",children:a.jsx("div",{className:"search",children:a.jsxs("form",{action:"",onSubmit:s=>w(s),children:[a.jsx("input",{ref:S,type:"text",placeholder:"Search for a quiz..."}),a.jsx(t,{icon:n,className:"icon"})]})})})}),a.jsxs("div",{className:"search-page empty",children:[a.jsx("h1",{children:"No submissions were found"}),a.jsx("p",{children:"please try checking the quiz title and try again"}),a.jsx(r,{to:`/dashboard/users/${_.user}/submissions`,children:"Submission list"})]})]});function w(s){s.preventDefault(),""!==S.current.value&&v(`/dashboard/users/${_.user}/submissions/search/${S.current.value}`)}return a.jsx(a.Fragment,{children:a.jsxs("div",{className:"show-user-submissions",children:[a.jsxs("div",{className:"page-header",children:[a.jsx("div",{className:"search",children:a.jsxs("form",{action:"",onSubmit:s=>w(s),children:[a.jsx("input",{ref:S,type:"text",placeholder:"Search for a quiz..."}),a.jsx(t,{icon:n,className:"icon"})]})}),a.jsxs("select",{onChange:function(){h((s=>{const e=[...s],i=y.current.value;return"1"===i?e.sort(((s,e)=>s.quiz.quiz_title.localeCompare(e.quiz.quiz_title))):"2"===i?e.sort(((s,e)=>e.quiz.quiz_title.localeCompare(s.quiz.quiz_title))):"3"===i?e.sort(((s,e)=>s.score-e.score)):"4"===i&&e.sort(((s,e)=>e.score-s.score)),e}))},ref:y,className:"sort",children:[a.jsx("option",{value:"1",children:"Sort from A to Z"}),a.jsx("option",{value:"2",children:"Sort from Z to A"}),a.jsx("option",{value:"3",children:"Sort by lowest score"}),a.jsx("option",{value:"4",children:"Sort by highest score"})]})]}),a.jsxs("h3",{className:"count",children:["Showing ",d.length," Submissions from ",d.total]}),a.jsxs("table",{children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{className:"info-title",children:"Title"}),a.jsx("th",{className:"description",children:"Description"}),a.jsx("th",{className:"info-count",children:"Question count"}),a.jsx("th",{className:"defficulty",children:"Defficulty"}),a.jsx("th",{className:"score",children:"Score"})]})}),a.jsx("tbody",{children:d.map((s=>{return a.jsxs("tr",{children:[a.jsx("td",{"data-info":"Title:",className:"info-title",children:a.jsx(r,{to:`/dashboard/users/${_.user}/results/${s.quiz.quiz_id}`,children:s.quiz.quiz_title})}),a.jsx("td",{"data-info":"Description:",className:"description",children:s.quiz.quiz_description}),a.jsx("td",{"data-info":"Question count:",className:"info-count",children:s.quiz.quiz_questions_count}),a.jsx("td",{"data-info":"Quiz defficulty:",className:"defficulty",children:(e=s.quiz.quiz_difficulty,1==e?"Easy":2==e?"Medium":"Hard")}),a.jsxs("td",{"data-info":"Score:",className:"score",children:[s.score,"%"]})]},s.quiz.quiz_id);var e}))})]}),x&&a.jsx(u,{path:"list"==l?`/dashboard/users/show/${_.user}`:`/dashboard/users/show/${_.user}/search/${_.search}`,page:_.page,lastPage:m})]})})}export{l as default};
